## General Overview

We aim to create a complete observability system for an application developed with FastAPI. This system will be responsible for collecting and analyzing metrics, logs, and traces. To achieve this, we will leverage the following set of tools:

* Otel-collector: A tool for collecting data and sending it to various systems.
* Clickhouse: A high-performance database designed for storing large datasets.
* Uptrace: A tool for tracing requests and observing system performance.
* Prometheus: A tool for collecting and storing metrics.
* Grafana: A tool for visualizing dashboards and graphs for data analysis.
* PostgreSQL: A powerful relational database used for storing structured data such as user data or application settings.
* Redis: A fast in-memory database used for caching data and improving system performance. In this project, Redis will be used for temporary data storage and to speed up data access.
* Tempo: A tool for collecting and managing trace data.
* Loki: A tool for collecting and storing logs. Loki integrates well with Prometheus and Grafana, allowing us to store and display logs generated by the FastAPI app.

### Project Structure

```shell
observability/
├─ app/
│  ├─ main.py
│  └─ requirements.txt
├─ Dockerfile
├─ docker-compose.yaml
├─ otel-collector.yaml
└─ uptrace.yaml
└─ prometheus.yaml
└─ tempo.yaml
└─ loki-config.yaml
```

---

Run the project with Docker Compose:

```bash
docker compose up -d --build
```

If the FastAPI image hasn’t been built yet, run the following command first:

```bash
docker build -t fastapi-app:latest .
```

Then run:

```bash
docker compose up -d
```

Testing:

You can test the setup by sending requests to the FastAPI app using:

```bash
curl -s "http://localhost:3001/health"
curl -s "http://localhost:3001/work?q=4"
```
